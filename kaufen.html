<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - ThrillerWelt</title>
<link rel="icon" href="logo-transparent-png.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#f7f7f7;color:#333;}
header{
    background:#fff;
    padding:15px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
}
header .logo{font-size:1.6rem;font-weight:600;color:#333;}
nav ul{display:flex;gap:25px;list-style:none;}
nav ul li a{text-decoration:none;color:#333;font-weight:500;transition:0.2s;}
nav ul li a:hover{color:#6c63ff;}
section{padding:50px 40px;}
h2{font-size:2rem;margin-bottom:20px;}
.checkout-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#fff;
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
    box-shadow:0 2px 8px rgba(0,0,0,0.05);
}
.checkout-item img{
    width:80px;
    height:100px;
    object-fit:cover;
    border-radius:5px;
    margin-right:15px;
}
.item-info{flex:1;}
.item-actions{display:flex;align-items:center;gap:10px;}
input.qty{
    width:50px;
    text-align:center;
    padding:5px;
    border-radius:5px;
    border:1px solid #ccc;
}
.btn{
    display:inline-block;background:#6c63ff;color:white;padding:8px 15px;border-radius:20px;
    cursor:pointer;font-size:0.9rem;transition:0.2s;text-align:center;text-decoration:none;
}
.btn:hover{background:#574ff0;}
.cart-total{
    text-align:right;
    font-size:1.2rem;
    font-weight:600;
    margin-top:20px;
}
.form-section{
    background:#fff;
    padding:20px;
    border-radius:10px;
    margin-top:30px;
    box-shadow:0 2px 8px rgba(0,0,0,0.05);
}
.form-section h3{
    margin-bottom:15px;
}
.form-section label{
    display:block;
    margin-bottom:5px;
    font-weight:500;
}
.form-section input, .form-section select{
    width:100%;
    padding:8px 10px;
    margin-bottom:15px;
    border-radius:5px;
    border:1px solid #ccc;
}
</style>
</head>
<body>

<header>
    <div class="logo">ThrillerWelt</div>
    <nav>
        <ul>
            <li><a href="index.html">Zurück zum Shop</a></li>
        </ul>
    </nav>
</header>

<section>
    <h2>Checkout</h2>
    <div id="checkoutItems"></div>
    <div class="cart-total">Gesamt: <span id="checkoutTotal">0.00</span> €</div>

    <!-- ADRESSE -->
    <div class="form-section">
        <h3>Lieferadresse</h3>
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="Max Mustermann">
        <label for="street">Straße & Hausnummer</label>
        <input type="text" id="street" placeholder="Musterstraße 1">
        <label for="city">PLZ & Stadt</label>
        <input type="text" id="city" placeholder="12345 Musterstadt">
        <label for="country">Land</label>
        <input type="text" id="country" placeholder="Deutschland">
    </div>

    <!-- ZAHLUNGSART -->
    <div class="form-section">
        <h3>Zahlungsart</h3>
        <select id="payment">
            <option value="">Bitte wählen</option>
            <option value="kreditkarte">Kreditkarte</option>
            <option value="paypal">PayPal</option>
            <option value="rechnung">Rechnung</option>
        </select>
    </div>

    <div style="margin-top:20px;">
        <a href="#" class="btn" onclick="checkout()">Jetzt bezahlen</a>
    </div>
</section>

<script>
// === LADE WARENKORB AUS localStorage ===
let cart = JSON.parse(localStorage.getItem('cart')) || [];

// === RENDER CHECKOUT ITEMS ===
function renderCheckout(){
    const container = document.getElementById('checkoutItems');
    container.innerHTML = cart.map(c => `
        <div class="checkout-item">
            <img src="${c.img}">
            <div class="item-info">
                <div><strong>${c.title}</strong></div>
                <div>${c.author}</div>
                <div>${c.price.toFixed(2)} € pro Stück</div>
            </div>
            <div class="item-actions">
                <input type="number" class="qty" value="${c.qty}" min="1" onchange="updateQty(${c.id}, this.value)">
                <span style="color:red;cursor:pointer;" onclick="removeItem(${c.id})">✖</span>
            </div>
        </div>
    `).join("");

    const total = cart.reduce((sum, c)=>sum + c.price*c.qty, 0);
    document.getElementById('checkoutTotal').innerText = total.toFixed(2);
}

// === UPDATE MENGE ===
function updateQty(id, qty){
    const item = cart.find(c=>c.id===id);
    if(item){
        item.qty = parseInt(qty);
        saveCart();
        renderCheckout();
    }
}

// === REMOVE ITEM ===
function removeItem(id){
    cart = cart.filter(c=>c.id!==id);
    saveCart();
    renderCheckout();
}

// === SAVE CART IN localStorage ===
function saveCart(){
    localStorage.setItem('cart', JSON.stringify(cart));
}

// === CHECKOUT FUNCTION ===
function checkout(){
    if(cart.length===0){
        alert("Ihr Warenkorb ist leer!");
        return;
    }

    // ADRESSENVALIDIERUNG
    const name = document.getElementById('name').value.trim();
    const street = document.getElementById('street').value.trim();
    const city = document.getElementById('city').value.trim();
    const country = document.getElementById('country').value.trim();
    const payment = document.getElementById('payment').value;

    if(!name || !street || !city || !country){
        alert("Bitte füllen Sie alle Adressfelder aus.");
        return;
    }
    if(!payment){
        alert("Bitte wählen Sie eine Zahlungsart.");
        return;
    }

    // SIMULIERTER KAUF
    alert(`Vielen Dank für Ihren Einkauf, ${name}!\n\nZahlungsart: ${payment}\nGesamt: ${document.getElementById('checkoutTotal').innerText} €`);
    cart = [];
    saveCart();
    renderCheckout();

    // Optional: Felder leeren
    document.getElementById('name').value = '';
    document.getElementById('street').value = '';
    document.getElementById('city').value = '';
    document.getElementById('country').value = '';
    document.getElementById('payment').value = '';
}

renderCheckout();
</script>

</body>
</html>
